<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Why not using ModelingToolkit.jl directly · HydroModels.jl</title><meta name="title" content="Why not using ModelingToolkit.jl directly · HydroModels.jl"/><meta property="og:title" content="Why not using ModelingToolkit.jl directly · HydroModels.jl"/><meta property="twitter:title" content="Why not using ModelingToolkit.jl directly · HydroModels.jl"/><meta name="description" content="Documentation for HydroModels.jl."/><meta property="og:description" content="Documentation for HydroModels.jl."/><meta property="twitter:description" content="Documentation for HydroModels.jl."/><meta property="og:url" content="https://chooron.github.io/HydroModels.jl/dev/extent/why_not_MTK_en/"/><meta property="twitter:url" content="https://chooron.github.io/HydroModels.jl/dev/extent/why_not_MTK_en/"/><link rel="canonical" href="https://chooron.github.io/HydroModels.jl/dev/extent/why_not_MTK_en/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">HydroModels.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Run Models</span><ul><li><a class="tocitem" href="../../tutorials/run_exphydro_model/">Run ExpHydro Model</a></li></ul></li><li><a class="tocitem" href="../../concepts_en/">Basic Concepts</a></li><li><span class="tocitem">Model Implementations</span><ul><li><a class="tocitem" href="../../implements/build_exphydro_model_en/">construct the ExpHydro Model</a></li><li><a class="tocitem" href="../../implements/build_m50_model_en/">construct the M50 Model</a></li><li><a class="tocitem" href="../../implements/build_discharge_route_en/">construct the discharge route model</a></li></ul></li><li><span class="tocitem">Extend Contents</span><ul><li class="is-active"><a class="tocitem" href>Why not using ModelingToolkit.jl directly</a><ul class="internal"><li><a class="tocitem" href="#Why-Not-Use-[ModelingToolkit.jl](https://github.com/SciML/ModelingToolkit.jl)-Directly"><span>Why Not Use ModelingToolkit.jl Directly</span></a></li><li><a class="tocitem" href="#Future-Work"><span>Future Work</span></a></li></ul></li><li><a class="tocitem" href="../framework_comparision_en/">Framework Comparision</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Extend Contents</a></li><li class="is-active"><a href>Why not using ModelingToolkit.jl directly</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Why not using ModelingToolkit.jl directly</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/chooron/HydroModels.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/chooron/HydroModels.jl/blob/main/docs/src/extent/why_not_MTK_en.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="HydroModels.jl-and-ModelingToolkit.jl"><a class="docs-heading-anchor" href="#HydroModels.jl-and-ModelingToolkit.jl">HydroModels.jl and ModelingToolkit.jl</a><a id="HydroModels.jl-and-ModelingToolkit.jl-1"></a><a class="docs-heading-anchor-permalink" href="#HydroModels.jl-and-ModelingToolkit.jl" title="Permalink"></a></h1><h2 id="Why-Not-Use-[ModelingToolkit.jl](https://github.com/SciML/ModelingToolkit.jl)-Directly"><a class="docs-heading-anchor" href="#Why-Not-Use-[ModelingToolkit.jl](https://github.com/SciML/ModelingToolkit.jl)-Directly">Why Not Use <a href="https://github.com/SciML/ModelingToolkit.jl">ModelingToolkit.jl</a> Directly</a><a id="Why-Not-Use-[ModelingToolkit.jl](https://github.com/SciML/ModelingToolkit.jl)-Directly-1"></a><a class="docs-heading-anchor-permalink" href="#Why-Not-Use-[ModelingToolkit.jl](https://github.com/SciML/ModelingToolkit.jl)-Directly" title="Permalink"></a></h2><p>The design philosophy of HydroModels.jl is actually completely aligned with ModelingToolkit.jl. Both frameworks use Symbolics.jl for symbolic computation. ModelingToolkit.jl is a more general symbolic system that supports the construction of various problems, and <a href="https://github.com/SciML/ModelingToolkitStandardLibrary.jl">ModelingToolkitStandardLibrary.jl</a> provides support for basic components in specific domains.</p><p>However, I encountered several issues when using ModelingToolkit.jl:</p><ul><li>Although ModelingToolkit.jl can express the ordinary differential equations of hydrological models through symbolic programming, its support for calculations like unit hydrograph and routing processes in hydrological models is not particularly ideal</li><li>Within the same module, such as evaporation calculation formulas and soil calculation modules, the modules needed for different regions may differ due to different formulas, requiring separate construction of calculation formulas to support model building</li><li>Hydrological models typically include multiple ordinary differential equations. Using a single ODESystem becomes relatively chaotic, while using multiple ODESystems becomes relatively complex</li><li>Additionally, ODESystem may not directly support multi-node input and spatial routing process calculations</li><li>Although ModelingToolkitNeuralNets.jl exists for neural network model embedding, the integration is not as straightforward as imagined</li><li>I also encountered issues with automatic differentiation support based on ModelingToolkit.jl, especially with Zygote.jl</li></ul><p>Therefore, I decided to build my own model library, referencing the symbolic programming model construction approach, to better support the modeling needs of hydrological models.</p><h2 id="Future-Work"><a class="docs-heading-anchor" href="#Future-Work">Future Work</a><a id="Future-Work-1"></a><a class="docs-heading-anchor-permalink" href="#Future-Work" title="Permalink"></a></h2><p>It&#39;s undeniable that ModelingToolkit.jl is an excellent framework. After meeting the requirements of hydrological models, I will try to make the modules in HydroModels.jl become similar modules in ModelingToolkitStandardLibrary.jl, and inherit the support of ModelingToolkit.jl&#39;s AbstractSystem class to provide consistent functional support, thereby maintaining compatibility with more computational capabilities in the SciML ecosystem.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../implements/build_discharge_route_en/">« construct the discharge route model</a><a class="docs-footer-nextpage" href="../framework_comparision_en/">Framework Comparision »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Friday 3 January 2025 12:01">Friday 3 January 2025</span>. Using Julia version 1.11.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
